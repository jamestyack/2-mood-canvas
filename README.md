# 🎨 MoodCanvas

Transform your emotions into personalized music, art, and video. MoodCanvas uses AI to analyze your mood description and creates:

- 🎵 **Spotify Playlist** - Curated tracks matching your emotional state
- 🎨 **AI Artwork** - Visual representation generated by DALL-E 3
- 🎬 **AI Video** - Cinematic mood visualization with Veo 3
- 📊 **Rich Analysis** - Detailed breakdown of emotions, colors, and energy

## ✨ Features

### 🧠 **Intelligent Mood Analysis**
- **GPT-4o powered** emotion extraction
- **Rich data extraction**: emotions, visual imagery, movement quality, color palette
- **Energy and tempo mapping** for precise music matching

### 🎵 **Enhanced Spotify Integration**
- **Multi-layered search**: genre + keywords + energy + tempo
- **Embedded playlists** playable directly in the app
- **Rich metadata** with mood context in playlist descriptions
- **OAuth authentication** with secure token caching

### 🎨 **Advanced Image Generation**
- **DALL-E 3 integration** with enhanced prompt engineering
- **Specific imagery extraction** from mood descriptions
- **Color palette matching** to emotional tone
- **Movement and energy visualization**

### 🎬 **AI Video Generation**
- **Veo 3 integration** with synchronized audio
- **Cinematic quality** 720p videos (8 seconds)
- **Enhanced prompt engineering** using mood analysis data
- **Real-time physics** and authentic motion simulation

### 🖥️ **Clean User Interface**
- **Minimalist design** with centered layout
- **Three-column results** showing artwork, playlist, and video
- **Interactive data flow** visualization
- **Mobile-responsive** design

## 🚀 Quick Start

### 1. **Clone the Repository**
```bash
git clone <your-repo-url>
cd 2-mood-canvas
```

### 2. **Install Dependencies**
```bash
pip install -r requirements.txt
```

### 3. **Set Up API Keys**
Copy the example environment file and add your API keys:
```bash
cp .env.example .env
```

Edit `.env` with your credentials:
```env
OPENAI_API_KEY=sk-your-openai-api-key-here
SPOTIPY_CLIENT_ID=your-spotify-client-id
SPOTIPY_CLIENT_SECRET=your-spotify-client-secret
SPOTIPY_REDIRECT_URI=http://127.0.0.1:8888/callback
GOOGLE_AI_API_KEY=your-google-ai-api-key-here
```

### 4. **Run the Application**
```bash
streamlit run app.py
```

Visit `http://localhost:8501` in your browser.

## 🔑 API Setup

### **OpenAI API**
1. Visit [OpenAI Platform](https://platform.openai.com/api-keys)
2. Create a new API key
3. Add to `.env` file as `OPENAI_API_KEY`

**Models used:**
- **GPT-4o** for mood analysis
- **DALL-E 3** for image generation

### **Spotify API**
1. Visit [Spotify for Developers](https://developer.spotify.com/dashboard)
2. Create a new app
3. Get Client ID and Client Secret
4. Set redirect URI to `http://127.0.0.1:8888/callback`
5. Add credentials to `.env` file

**Permissions needed:**
- `playlist-modify-public`
- `playlist-modify-private`

### **Google AI API**
1. Visit [Google AI Studio](https://ai.google.dev/)
2. Create a new API key
3. Add to `.env` file as `GOOGLE_AI_API_KEY`

**Models used:**
- **Veo 3** for AI video generation with synchronized audio

## 📁 Project Structure

```
MoodCanvas/
├── app.py                    # Main Streamlit application
├── mood_to_music.py         # GPT-4o mood analysis
├── spotify_client.py        # Spotify API integration
├── image_generator.py       # DALL-E image generation
├── video_generator.py       # Veo 3 video generation
├── audio_utils.py          # Audio transcription (future)
├── requirements.txt        # Python dependencies
├── .env.example           # Environment template
├── .env                   # Your API keys (ignored by git)
├── .gitignore            # Git ignore rules
└── README.md             # This file
```

## 🎯 How It Works

### **1. Mood Input**
Enter a description of how you're feeling:
> "I feel like I'm gracefully running with strong momentum to the finish line light on my toes, confident and winning"

### **2. AI Analysis** 
GPT-4o extracts rich details:
- **Emotions**: graceful, triumphant, flowing
- **Visual Elements**: finish line, running, light steps
- **Colors**: electric gold, victory blue, bright white
- **Energy**: high energy, fast tempo
- **Keywords**: running, victory, momentum, grace

### **3. Content Generation**
**Spotify Search:**
- 40% genre-based (electronic, pop)
- 30% keyword+genre ("running electronic")
- 20% pure keywords ("victory", "momentum")
- 10% energy-based ("energetic", "powerful")

**Image Generation:**
> "Dynamic artwork showing finish line, running, light steps... featuring electric gold, victory blue, bright white color palette. Fluid, elegant curves with dynamic, powerful, intense motion..."

**Video Generation:**
> "Cinematic video showing finish line, running, light steps, embodying the feeling of 'gracefully running with strong momentum to the finish line'... with electric gold, victory blue, bright white color scheme and dramatic lighting. Dynamic, energetic movement with flowing motion..."

### **4. Results**
- **Embedded Spotify playlist** with 15 curated tracks
- **High-quality AI artwork** with download option
- **8-second cinematic video** with synchronized audio
- **Rich metadata** showing all extracted elements

## 🔧 Technical Details

### **Dependencies**
- `streamlit` - Web application framework
- `openai` - GPT-4o and DALL-E 3 integration
- `spotipy` - Spotify Web API client
- `google-generativeai` - Veo 3 video generation
- `python-dotenv` - Environment variable management
- `requests` - HTTP requests for media downloading

### **Key Features**
- **Enhanced prompt engineering** for better AI outputs
- **Multi-source music search** for diverse track selection
- **Rich metadata extraction** from natural language
- **Secure credential management** with .env files
- **Interactive data visualization** of the transformation process

## 🧪 Testing

### **Built-in Test Functions**
Access via "🛠️ Developer Tools" at the bottom of the app:

- **🧪 Test Spotify** - Verify API connection and search
- **🎭 Test Mood Analysis** - Test GPT-4o with sample moods
- **🎨 Test Image Generation** - Test DALL-E with sample prompts
- **🎬 Test Video Generation** - Test Veo 3 with sample moods

### **Standalone Testing**
```bash
# Test individual components
python3 spotify_client.py     # Test Spotify integration
python3 mood_to_music.py      # Test mood analysis
python3 image_generator.py    # Test image generation
python3 video_generator.py    # Test video generation
```

## 🎨 Example Results

### **Input:**
> "Feeling nostalgic while watching the sunset, remembering old friends"

### **Analysis:**
- **Emotions:** nostalgic, wistful, warm
- **Visual Elements:** sunset, golden hour, memories
- **Colors:** warm amber, soft gold, dusky purple
- **Energy:** low, contemplative
- **Genres:** folk, ambient

### **Outputs:**
- **Playlist:** "Golden Hour Memories" with ambient folk and acoustic tracks
- **Artwork:** Warm sunset scene with flowing, nostalgic elements
- **Video:** 8-second cinematic sequence showing golden hour memories with synchronized ambient soundtrack
- **Metadata:** Complete breakdown of the mood transformation

## 🚧 Future Enhancements

- ✅ **Video Generation** with Google Gemini Veo (implemented)
- 🎙️ **Audio Input** with OpenAI Whisper transcription
- 📱 **Mobile App** with React Native
- 🤝 **Social Sharing** of mood canvases
- 📈 **Mood Tracking** over time
- 🎵 **Music Preview** integration

## 🐛 Troubleshooting

### **Common Issues**

**"No tracks found"**
- Check Spotify API credentials
- Verify internet connection
- Try a different mood description

**"Image generation failed"**
- Verify OpenAI API key and credits
- Check internet connection
- Try a simpler mood description

**"Authentication failed"**
- Ensure API credentials are correct in `.env`
- Check redirect URI matches Spotify app settings
- Verify `.env` file is in the root directory

### **Performance Optimization**
- Install `watchdog` for faster Streamlit reloads
- Use shorter mood descriptions for faster processing
- Consider API rate limits for high usage

## 📄 License

This project is for demonstration and educational purposes. Please ensure you comply with all API terms of service:

- [OpenAI API Terms](https://openai.com/policies/terms-of-use)
- [Spotify API Terms](https://developer.spotify.com/terms)

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test thoroughly
5. Submit a pull request

## 📞 Support

For issues or questions:
1. Check the troubleshooting section
2. Review API documentation
3. Test with the built-in development tools
4. Create an issue in the repository

---

**Built with ❤️ using OpenAI GPT-4o, DALL-E 3, and Spotify Web API**

*Transform your emotions into music and art with AI* 🎨🎵